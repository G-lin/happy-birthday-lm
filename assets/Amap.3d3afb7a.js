import{k as e,h as a,v as n,n as t,l as o,f as s,q as i,r as c,o as l,c as r,M as p,F as d,i as u}from"./vendor.cacf07dc.js";import{p as m,P as f,a as w,L as v,$ as b,B as h}from"./vant.e3213663.js";import{e as k,t as g,p as A,c as M,I as y,w as C}from"./index.12b81101.js";import{N as I}from"./index.2855972c.js";import"./on-popup-reopen.245b7e68.js";import"./interceptor.ab5a9c16.js";import"./use-route.681c85a7.js";var[x,j]=M("action-sheet"),B=C(e({name:x,props:k({},m,{title:String,round:g,actions:Array,closeable:g,cancelText:String,description:String,closeOnPopstate:Boolean,closeOnClickAction:Boolean,safeAreaInsetBottom:g,closeIcon:{type:String,default:"cross"}}),emits:["select","cancel","update:show"],setup(e,{slots:o,emit:s}){var i=e=>s("update:show",e),c=()=>{i(!1),s("cancel")},l=()=>{if(e.title)return a("div",{class:j("header")},[e.title,e.closeable&&a(y,{name:e.closeIcon,class:j("close"),onClick:c},null)])},r=()=>{if(o.cancel||e.cancelText)return[a("div",{class:j("gap")},null),a("button",{type:"button",class:j("cancel"),onClick:c},[o.cancel?o.cancel():e.cancelText])]},p=(n,o)=>{var{name:c,color:l,subname:r,loading:p,callback:d,disabled:u,className:m}=n,f=p?a(v,{class:j("loading-icon")},null):[a("span",{class:j("name")},[c]),r&&a("div",{class:j("subname")},[r])];return a("button",{type:"button",style:{color:l},class:[j("item",{loading:p,disabled:u}),m],onClick:()=>{u||p||(d&&d(n),e.closeOnClickAction&&i(!1),t((()=>s("select",n,o))))}},[f])},d=()=>{if(e.description||o.description){var n=o.description?o.description():e.description;return a("div",{class:j("description")},[n])}},u=()=>{if(e.actions)return e.actions.map(p)};return()=>a(f,n({class:j(),round:e.round,position:"bottom",safeAreaInsetBottom:e.safeAreaInsetBottom},A(e,w),{"onUpdate:show":i}),{default:()=>[l(),d(),a("div",{class:j("content")},[u(),null==o.default?void 0:o.default()]),r()]})}}));const S={name:"Amap",components:{[B.name]:B,[I.name]:I,[h.name]:h},setup(){const e=i();o((()=>{!function({key:e="e41e19bc267e",success:a=function(){},error:n=function(){}}){if(window.AMap)return void a(window.AMap);let t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=`https://webapi.amap.com/maps?v=1.4.15&key=${e}&callback=_amapInitMap`,t.onerror=function(e){b.errorMsg("高德地图加载失败，请重试"),console.warn("高德地图加载失败，error:",e),n(e)},document.head.appendChild(t),window._amapInitMap=()=>{a(window.AMap)}}({success(e){let a=new e.Map("map",{zoom:11,center:[117,39],viewMode:"3D"}),n=new e.Marker({position:[117,39],animation:"AMAP_ANIMATION_DROP"});a.add(n),e.plugin("AMap.ToolBar",(function(){let n=new e.ToolBar;a.addControl(n)}))}})}));return{navLeftClick:()=>{e.go(-1)},navigation:s({show:!1,options:[{name:"高德地图",url:"https://uri.amap.com/marker"},{name:"百度地图",url:"https://api.map.baidu.com/marker"}],select:e=>{let{name:a,url:n}=e;switch(a){case"高德地图":n+="?position=117,39";break;case"百度地图":n+="?location=39,117&output=html&src=webapp.baidu.openAPIdemo";break;default:return}window.open(n)}})}}},T=a("div",{id:"map",style:{width:"100%",height:"300px"}},null,-1),L=u("导航 ");S.render=function(e,n,t,o,s,i){const u=c("van-nav-bar"),m=c("van-button"),f=c("van-action-sheet");return l(),r(d,null,[a(u,{title:"高德地图","left-text":"返回","left-arrow":"",onClickLeft:o.navLeftClick},null,8,["onClickLeft"]),T,a(m,{icon:"share-o",type:"primary",onClick:n[1]||(n[1]=e=>o.navigation.show=!0)},{default:p((()=>[L])),_:1}),a(f,{description:"请选择导航app","cancel-text":"取消",show:o.navigation.show,"onUpdate:show":n[2]||(n[2]=e=>o.navigation.show=e),actions:o.navigation.options,onSelect:o.navigation.select},null,8,["show","actions","onSelect"])],64)};export default S;
