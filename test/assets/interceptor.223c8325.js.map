{"version":3,"file":"interceptor.223c8325.js","sources":["../../../node_modules/@vant/use/dist/esm/useRelation/useParent.js","../../../node_modules/@vant/use/dist/esm/useRelation/useChildren.js","../../../node_modules/vant/es/utils/interceptor.js"],"sourcesContent":["import { ref, inject, computed, onUnmounted, getCurrentInstance } from 'vue';\nexport function useParent(key) {\n  var parent = inject(key, null);\n\n  if (parent) {\n    var instance = getCurrentInstance();\n    var {\n      link: _link,\n      unlink: _unlink,\n      internalChildren\n    } = parent;\n\n    _link(instance);\n\n    onUnmounted(() => _unlink(instance));\n    var index = computed(() => internalChildren.indexOf(instance));\n    return {\n      parent,\n      index\n    };\n  }\n\n  return {\n    parent: null,\n    index: ref(-1)\n  };\n}","import { isVNode, provide, reactive, getCurrentInstance } from 'vue';\nexport function flattenVNodes(children) {\n  var result = [];\n\n  var traverse = children => {\n    if (Array.isArray(children)) {\n      children.forEach(child => {\n        if (isVNode(child)) {\n          var _child$component;\n\n          result.push(child);\n\n          if ((_child$component = child.component) != null && _child$component.subTree) {\n            traverse(child.component.subTree.children);\n          }\n\n          if (child.children) {\n            traverse(child.children);\n          }\n        }\n      });\n    }\n  };\n\n  traverse(children);\n  return result;\n} // sort children instances by vnodes order\n\nexport function sortChildren(parent, publicChildren, internalChildren) {\n  var vnodes = flattenVNodes(parent.subTree.children);\n  internalChildren.sort((a, b) => vnodes.indexOf(a.vnode) - vnodes.indexOf(b.vnode));\n  var orderedPublicChildren = internalChildren.map(item => item.proxy);\n  publicChildren.sort((a, b) => {\n    var indexA = orderedPublicChildren.indexOf(a);\n    var indexB = orderedPublicChildren.indexOf(b);\n    return indexA - indexB;\n  });\n}\nexport function useChildren(key) {\n  var publicChildren = reactive([]);\n  var internalChildren = reactive([]);\n  var parent = getCurrentInstance();\n\n  var linkChildren = value => {\n    var link = child => {\n      if (child.proxy) {\n        internalChildren.push(child);\n        publicChildren.push(child.proxy);\n        sortChildren(parent, publicChildren, internalChildren);\n      }\n    };\n\n    var unlink = child => {\n      var index = internalChildren.indexOf(child);\n      publicChildren.splice(index, 1);\n      internalChildren.splice(index, 1);\n    };\n\n    provide(key, Object.assign({\n      link,\n      unlink,\n      children: publicChildren,\n      internalChildren\n    }, value));\n  };\n\n  return {\n    children: publicChildren,\n    linkChildren\n  };\n}","import { isPromise, noop } from '.';\nexport function callInterceptor(options) {\n  var {\n    interceptor,\n    args,\n    done,\n    canceled\n  } = options;\n\n  if (interceptor) {\n    // eslint-disable-next-line prefer-spread\n    var returnVal = interceptor.apply(null, args || []);\n\n    if (isPromise(returnVal)) {\n      returnVal.then(value => {\n        if (value) {\n          done();\n        } else if (canceled) {\n          canceled();\n        }\n      }).catch(noop);\n    } else if (returnVal) {\n      done();\n    } else if (canceled) {\n      canceled();\n    }\n  } else {\n    done();\n  }\n}"],"names":["key","parent","inject","instance","getCurrentInstance","link","_link","unlink","_unlink","internalChildren","index","computed","indexOf","ref","publicChildren","children","result","traverse","vnodes","subTree","Array","isArray","children2","forEach","_child$component","isVNode","child","push","component","sort","a","b","vnode","orderedPublicChildren","map","item","proxy","reactive","linkChildren","Object","assign","splice","value","options","interceptor","args","done","canceled","returnVal","apply","isPromise","then","catch","noop"],"mappings":"oIACO,WAAmBA,OACpBC,EAASC,EAAOF,EAAK,SAErBC,EAAQ,KACNE,EAAWC,KAEbC,KAAMC,EACNC,OAAQC,mBACRC,GACER,WAEEE,MAEM,IAAMK,EAAQL,KAEnB,CACLF,OAAAA,EACAS,MAHUC,GAAS,IAAMF,EAAiBG,QAAQT,YAO/C,CACLF,OAAQ,KACRS,MAAOG,OCIJ,WAAsBZ,EAAQa,EAAgBL,OA3BvBM,EACxBC,EAEAC,EAyBAC,GA5BwBH,EA4BDd,EAAOkB,QAAQJ,SA3BtCC,EAAS,IAETC,MACEG,MAAMC,QAAQC,MACPC,iBAEDC,EADFC,EAAQC,OAGHC,KAAKD,GAEgC,SAApBA,EAAME,YAAsBJ,EAAiBL,WAC1DO,EAAME,UAAUT,QAAQJ,UAG/BW,EAAMX,YACCW,EAAMX,gBAOhBA,GACFC,KAKUa,MAAK,CAACC,EAAGC,IAAMb,EAAON,QAAQkB,EAAEE,OAASd,EAAON,QAAQmB,EAAEC,aACvEC,EAAwBxB,EAAiByB,QAAYC,EAAKC,UAC/CP,MAAK,CAACC,EAAGC,IACTE,EAAsBrB,QAAQkB,GAC9BG,EAAsBrB,QAAQmB,KAIxC,WAAqB/B,OACtBc,EAAiBuB,EAAS,IAC1B5B,EAAmB4B,EAAS,IAC5BpC,EAASG,UAyBN,CACLW,SAAUD,EACVwB,mBAVQtC,EAAKuC,OAAOC,OAAO,CACzBnC,SAdIqB,EAAMU,UACST,KAAKD,KACPC,KAAKD,EAAMU,SACbnC,EAAQa,EAAgBL,KAYvCF,eAPIG,EAAQD,EAAiBG,QAAQc,KACtBe,OAAO/B,EAAO,KACZ+B,OAAO/B,EAAO,IAM/BK,SAAUD,EACVL,iBAAAA,GACCiC,MC9DA,WAAyBC,OAC1BC,YACFA,OACAC,OACAC,WACAC,GACEJ,KAEAC,EAAa,KAEXI,EAAYJ,EAAYK,MAAM,KAAMJ,GAAQ,IAE5CK,EAAUF,KACFG,UACJT,MAEOK,UAGVK,MAAMC,GACAL,MAEAD"}