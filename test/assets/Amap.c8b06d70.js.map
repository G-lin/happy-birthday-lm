{"version":3,"file":"Amap.c8b06d70.js","sources":["../../../node_modules/vant/es/action-sheet/ActionSheet.js","../../../node_modules/vant/es/action-sheet/index.js","../../../src/views/demo/Amap.vue","../../../src/utils/amap.js"],"sourcesContent":["import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { nextTick, defineComponent } from 'vue'; // Utils\n\nimport { pick, extend, truthProp, createNamespace } from '../utils'; // Components\n\nimport { Icon } from '../icon';\nimport { Popup } from '../popup';\nimport { Loading } from '../loading';\nimport { popupSharedProps, popupSharedPropKeys } from '../popup/shared';\nvar [name, bem] = createNamespace('action-sheet');\nexport default defineComponent({\n  name,\n  props: extend({}, popupSharedProps, {\n    title: String,\n    round: truthProp,\n    actions: Array,\n    closeable: truthProp,\n    cancelText: String,\n    description: String,\n    closeOnPopstate: Boolean,\n    closeOnClickAction: Boolean,\n    safeAreaInsetBottom: truthProp,\n    closeIcon: {\n      type: String,\n      default: 'cross'\n    }\n  }),\n  emits: ['select', 'cancel', 'update:show'],\n\n  setup(props, {\n    slots,\n    emit\n  }) {\n    var updateShow = show => emit('update:show', show);\n\n    var onCancel = () => {\n      updateShow(false);\n      emit('cancel');\n    };\n\n    var renderHeader = () => {\n      if (props.title) {\n        return _createVNode(\"div\", {\n          \"class\": bem('header')\n        }, [props.title, props.closeable && _createVNode(Icon, {\n          \"name\": props.closeIcon,\n          \"class\": bem('close'),\n          \"onClick\": onCancel\n        }, null)]);\n      }\n    };\n\n    var renderCancel = () => {\n      if (slots.cancel || props.cancelText) {\n        return [_createVNode(\"div\", {\n          \"class\": bem('gap')\n        }, null), _createVNode(\"button\", {\n          \"type\": \"button\",\n          \"class\": bem('cancel'),\n          \"onClick\": onCancel\n        }, [slots.cancel ? slots.cancel() : props.cancelText])];\n      }\n    };\n\n    var renderOption = (item, index) => {\n      var {\n        name,\n        color,\n        subname,\n        loading,\n        callback,\n        disabled,\n        className\n      } = item;\n      var Content = loading ? _createVNode(Loading, {\n        \"class\": bem('loading-icon')\n      }, null) : [_createVNode(\"span\", {\n        \"class\": bem('name')\n      }, [name]), subname && _createVNode(\"div\", {\n        \"class\": bem('subname')\n      }, [subname])];\n\n      var onClick = () => {\n        if (disabled || loading) {\n          return;\n        }\n\n        if (callback) {\n          callback(item);\n        }\n\n        if (props.closeOnClickAction) {\n          updateShow(false);\n        }\n\n        nextTick(() => emit('select', item, index));\n      };\n\n      return _createVNode(\"button\", {\n        \"type\": \"button\",\n        \"style\": {\n          color\n        },\n        \"class\": [bem('item', {\n          loading,\n          disabled\n        }), className],\n        \"onClick\": onClick\n      }, [Content]);\n    };\n\n    var renderDescription = () => {\n      if (props.description || slots.description) {\n        var content = slots.description ? slots.description() : props.description;\n        return _createVNode(\"div\", {\n          \"class\": bem('description')\n        }, [content]);\n      }\n    };\n\n    var renderOptions = () => {\n      if (props.actions) {\n        return props.actions.map(renderOption);\n      }\n    };\n\n    return () => _createVNode(Popup, _mergeProps({\n      \"class\": bem(),\n      \"round\": props.round,\n      \"position\": \"bottom\",\n      \"safeAreaInsetBottom\": props.safeAreaInsetBottom\n    }, pick(props, popupSharedPropKeys), {\n      'onUpdate:show': updateShow\n    }), {\n      default: () => [renderHeader(), renderDescription(), _createVNode(\"div\", {\n        \"class\": bem('content')\n      }, [renderOptions(), slots.default == null ? void 0 : slots.default()]), renderCancel()]\n    });\n  }\n\n});","import { withInstall } from '../utils';\nimport _ActionSheet from './ActionSheet';\nvar ActionSheet = withInstall(_ActionSheet);\nexport default ActionSheet;\nexport { ActionSheet };","<template>\n    <van-nav-bar title=\"高德地图\"\n                 left-text=\"返回\" left-arrow\n                 @clickLeft=\"navLeftClick\"/>\n    <!--高德map地图-->\n    <div id=\"map\" style=\"width: 100%;height: 300px;\"></div>\n    <!--导航-->\n    <van-button icon=\"share-o\" type=\"primary\"\n                @click=\"navigation.show = true\">导航\n    </van-button>\n    <!--导航面板-->\n    <van-action-sheet description=\"请选择导航app\" cancel-text=\"取消\"\n                      v-model:show=\"navigation.show\"\n                      :actions=\"navigation.options\"\n                      @select=\"navigation.select\"/>\n</template>\n\n<script>\n    //引入router\n    import {useRouter} from 'vue-router';\n    //引入高德地图工具类\n    import MapLoader from \"@/utils/amap.js\";\n    import {onMounted, ref, reactive} from 'vue';\n    import {ActionSheet, NavBar, Button} from 'vant';\n\n    export default {\n        name: \"Amap\",\n        components: {\n            [ActionSheet.name]: ActionSheet,\n            [NavBar.name]: NavBar,\n            [Button.name]: Button,\n        },\n        setup() {\n            const $router = useRouter();\n            const navLeftClick = () => {\n                $router.go(-1);\n            }\n            onMounted(() => {\n                MapLoader({\n                    success(AMap) {\n                        //创建地图\n                        let map = new AMap.Map('map', {\n                            //级别\n                            zoom: 11,\n                            //中心点坐标\n                            center: [117, 39],\n                            //使用3D视图\n                            viewMode: '3D'\n                        });\n                        //创建标记点的位置\n                        let marker = new AMap.Marker({\n                            //位置\n                            position: [117, 39],\n                            //点标记的动画效果，默认值：\n                            //  “AMAP_ANIMATION_NONE”\n                            //可选值：\n                            //   “AMAP_ANIMATION_NONE”，无动画效果\n                            //“AMAP_ANIMATION_DROP”，点标掉落效果\n                            //“AMAP_ANIMATION_BOUNCE”，点标弹跳效果\n                            animation: 'AMAP_ANIMATION_DROP'\n                        });\n                        //添加到地图\n                        map.add(marker);\n                        //工具条，控制地图的缩放、平移等\n                        AMap.plugin('AMap.ToolBar', function () {\n                            let toolbar = new AMap.ToolBar();\n                            map.addControl(toolbar);\n                        });\n                    }\n                });\n            });\n            //导航\n            const navigation = reactive({\n                show: false,\n                options: [\n                    {\n                        name: '高德地图',\n                        url: 'https://uri.amap.com/marker'\n                    },\n                    {\n                        name: '百度地图',\n                        url: 'https://api.map.baidu.com/marker'\n                    },\n                ],\n                select: (item) => {\n                    let {name, url} = item;\n                    switch (name) {\n                        case '高德地图': {\n                            url += `?position=${117},${39}`;\n                        }\n                            break;\n                        case '百度地图': {\n                            url += `?location=${39},${117}&output=html&src=webapp.baidu.openAPIdemo`;\n                        }\n                            break;\n                        default: {\n                            return;\n                        }\n                    }\n                    window.open(url);\n                }\n            });\n            return {\n                navLeftClick,\n                navigation\n            }\n        }\n    }\n</script>","//高德开放平台 Web端(JS API) key  https://console.amap.com/dev/key/app\nconst DEFAULT_KEY = 'e41e19bc267e';\n\n//引入全局方法\nimport $vant from \"./vant.ts\";\n\n/**高德地图加载\n *\n * @param key        高德开放平台 Web端(JS API) key,不设置使用默认\n * @param success   成功回调\n * @param error\n * @constructor\n */\nexport default function MapLoader(\n    {\n        key = DEFAULT_KEY,\n        success = function () {\n\n        },\n        error = function () {\n\n        }\n    }\n) {\n    if (window.AMap) {\n        success(window.AMap);\n        return;\n    }\n    let script = document.createElement('script');\n    script.type = 'text/javascript';\n    script.async = true;\n    script.src = `https://webapi.amap.com/maps?v=1.4.15&key=${key}&callback=_amapInitMap`;\n    //如果加载失败\n    script.onerror = function (e) {\n        $vant.errorMsg('高德地图加载失败，请重试');\n        console.warn('高德地图加载失败，error:', e);\n        error(e);\n    };\n    document.head.appendChild(script);\n    window._amapInitMap = () => {\n        success(window.AMap);\n    }\n}"],"names":["name","bem","createNamespace","ActionSheet","withInstall","defineComponent","props","extend","popupSharedProps","title","String","round","truthProp","actions","Array","closeable","cancelText","description","closeOnPopstate","Boolean","closeOnClickAction","safeAreaInsetBottom","closeIcon","type","default","emits","[object Object]","slots","emit","updateShow","show","onCancel","renderHeader","_createVNode","class","Icon","onClick","renderCancel","cancel","renderOption","item","index2","color","subname","loading","callback","disabled","className","Content","Loading","name2","style","renderDescription","content","renderOptions","map","Popup","_mergeProps","position","pick","popupSharedPropKeys","onUpdate:show","components","NavBar","Button","$router","useRouter","key","success","error","window","AMap","script","document","createElement","async","src","onerror","e","errorMsg","warn","head","appendChild","_amapInitMap","Map","zoom","center","viewMode","marker","Marker","animation","add","plugin","toolbar","ToolBar","addControl","navLeftClick","go","navigation","reactive","options","url","select","open","_hoisted_1","id","left-text","left-arrow","_createCommentVNode","icon","_component_van_action_sheet","cancel-text"],"mappings":"oaASA,IAAKA,EAAMC,GAAOC,EAAgB,gBCP9BC,EAAcC,EDQHC,EAAgB,CAC7BL,KAAAA,EACAM,MAAOC,EAAO,GAAIC,EAAkB,CAClCC,MAAOC,OACPC,MAAOC,EACPC,QAASC,MACTC,UAAWH,EACXI,WAAYN,OACZO,YAAaP,OACbQ,gBAAiBC,QACjBC,mBAAoBD,QACpBE,oBAAqBT,EACrBU,UAAW,CACTC,KAAMb,OACNc,QAAS,WAGbC,MAAO,CAAC,SAAU,SAAU,eAE5BC,MAAMpB,GAAOqB,MACXA,OACAC,QAEIC,KAAqBD,EAAK,cAAeE,GAEzCC,EAAW,QACF,KACN,WAGHC,EAAe,QACb1B,EAAMG,aACDwB,EAAa,MAAO,CACzBC,MAASjC,EAAI,WACZ,CAACK,EAAMG,MAAOH,EAAMS,WAAakB,EAAaE,EAAM,CACrDnC,KAAQM,EAAMgB,UACdY,MAASjC,EAAI,SACbmC,QAAWL,GACV,SAIHM,EAAe,QACbV,EAAMW,QAAUhC,EAAMU,iBACjB,CAACiB,EAAa,MAAO,CAC1BC,MAASjC,EAAI,QACZ,MAAOgC,EAAa,SAAU,CAC/BV,KAAQ,SACRW,MAASjC,EAAI,UACbmC,QAAWL,GACV,CAACJ,EAAMW,OAASX,EAAMW,SAAWhC,EAAMU,eAI1CuB,EAAe,CAACC,EAAMC,SAEtBzC,aACA0C,UACAC,UACAC,WACAC,WACAC,YACAC,GACEP,EACAQ,EAAUJ,EAAUX,EAAagB,EAAS,CAC5Cf,MAASjC,EAAI,iBACZ,MAAQ,CAACgC,EAAa,OAAQ,CAC/BC,MAASjC,EAAI,SACZ,CAACiD,IAAQP,GAAWV,EAAa,MAAO,CACzCC,MAASjC,EAAI,YACZ,CAAC0C,YAkBGV,EAAa,SAAU,CAC5BV,KAAQ,SACR4B,MAAS,CACPT,MAAAA,GAEFR,MAAS,CAACjC,EAAI,OAAQ,CACpB2C,QAAAA,EACAE,SAAAA,IACEC,GACJX,QAzBY,KACRU,GAAYF,IAIZC,KACOL,GAGPlC,EAAMc,uBACG,MAGJ,IAAMQ,EAAK,SAAUY,EAAMC,QAanC,CAACO,KAGFI,EAAoB,QAClB9C,EAAMW,aAAeU,EAAMV,YAAa,KACtCoC,EAAU1B,EAAMV,YAAcU,EAAMV,cAAgBX,EAAMW,mBACvDgB,EAAa,MAAO,CACzBC,MAASjC,EAAI,gBACZ,CAACoD,MAIJC,EAAgB,QACdhD,EAAMO,eACDP,EAAMO,QAAQ0C,IAAIhB,UAItB,IAAMN,EAAauB,EAAOC,EAAY,CAC3CvB,MAASjC,IACTU,MAASL,EAAMK,MACf+C,SAAY,SACZrC,oBAAuBf,EAAMe,qBAC5BsC,EAAKrD,EAAOsD,GAAsB,CACnCC,gBAAiBhC,IACf,CACFL,QAAS,IAAM,CAACQ,IAAgBoB,IAAqBnB,EAAa,MAAO,CACvEC,MAASjC,EAAI,YACZ,CAACqD,IAAkC,MAAjB3B,EAAMH,aAAkB,EAASG,EAAMH,YAAaa,WE/GtE,SACDrC,KAAM,OACN8D,WAAY,EACP3D,EAAYH,MAAOG,GACnB4D,EAAO/D,MAAO+D,GACdC,EAAOhE,MAAOgE,GAEnBtC,cACUuC,EAAUC,OAIN,MCxBP,UACXC,IACIA,EAdY,uBAeZC,EAAU,mBAGVC,EAAQ,kBAKRC,OAAOC,mBACCD,OAAOC,UAGfC,EAASC,SAASC,cAAc,YAC7BnD,KAAO,oBACPoD,OAAQ,IACRC,IAAM,6CAA6CT,4BAEnDU,QAAU,SAAUC,KACjBC,SAAS,wBACPC,KAAK,kBAAmBF,KAC1BA,aAEDG,KAAKC,YAAYV,UACnBW,aAAe,OACVb,OAAOC,QDFG,CACN7C,QAAQ6C,OAEAhB,EAAM,IAAIgB,EAAKa,IAAI,MAAO,CAE1BC,KAAM,GAENC,OAAQ,CAAC,IAAK,IAEdC,SAAU,OAGVC,EAAS,IAAIjB,EAAKkB,OAAO,CAEzB/B,SAAU,CAAC,IAAK,IAOhBgC,UAAW,0BAGXC,IAAIH,KAEHI,OAAO,gBAAgB,eACpBC,EAAU,IAAItB,EAAKuB,UACnBC,WAAWF,kBAoCxB,CACHG,aArEiB,OACTC,QAqERC,WAhCeC,EAAS,CACxBrE,MAAM,EACNsE,QAAS,CACL,CACIpG,KAAM,OACNqG,IAAK,+BAET,CACIrG,KAAM,OACNqG,IAAK,qCAGbC,OAAS9D,QACAxC,WAAMqG,GAAO7D,SACVU,OACC,UACM,6BAGN,UACM,wFAORqD,KAAKF,SA9FpBG,WAAMC,8LAHDhG,aAAeiG,iBACdC,oEAEdC,aACAJ,EACAI,aAA2BC,KAAK,UACnBtF,yFAGbqF,YAA6BE,GAAY7F,YAAW,WAC1B8F,0CACPlD,oDACAhD,qBAAkBuF"}