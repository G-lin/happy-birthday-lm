import{_ as e}from"./index.c2c83194.js";import{q as t,b as a,r as i,e as l,g as r,c as n,w as o,i as s,s as u,t as d,o as v,f as c,u as p}from"./index.ab83b5f8.js";import{E as f}from"./index.8b50abf8.js";import{C as h}from"./index.4ab86201.js";import{u as g,N as m}from"./index.52cdef72.js";import{u as b,i as w,J as y,x,y as S,j as C,f as I,v as T,w as k,g as N,k as L,B,n as R,E as z,C as _,z as M,A as j,e as O,m as A,r as E,o as D,c as H,H as W,F as P,h as U,K as X}from"./vendor.64c8d20c.js";import{i as q,b as Y,c as F,r as $,o as V,d as J,a as K,u as G,e as Q,f as Z,p as ee}from"./on-popup-reopen.ca56adb1.js";import{u as te,c as ae,a as ie}from"./interceptor.223c8325.js";import{a as le,r as re}from"./use-route.6524b53e.js";function ne(e,t,a){return Math.min(Math.max(e,t),a)}function oe(e){var t=b(e);if(!t)return!1;var a=window.getComputedStyle(t),i="none"===a.display,l=null===t.offsetParent&&"fixed"!==a.position;return i||l}function se(e){return e===window}function ue(e){var t="scrollTop"in e?e.scrollTop:e.pageYOffset;return Math.max(t,0)}function de(e,t){"scrollTop"in e?e.scrollTop=t:e.scrollTo(e.scrollX,t)}function ve(e,t){if(se(e))return 0;var a=t?ue(t):window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;return e.getBoundingClientRect().top+a}function ce(){var e=w(q?window.innerWidth:0),t=w(q?window.innerHeight:0),a=()=>{e.value=window.innerWidth,t.value=window.innerHeight};return Y("resize",a),Y("orientationchange",a),{width:e,height:t}}var pe;t();var[fe,he]=n("sticky"),ge=o(C({name:fe,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(e,{emit:t,slots:n}){var o=w(),s=J(o),u=I({fixed:!1,width:0,height:0,transform:0}),d=T((()=>i("top"===e.position?e.offsetTop:e.offsetBottom))),v=T((()=>{var{fixed:e,height:t,width:a}=u;if(e)return{width:a+"px",height:t+"px"}})),c=T((()=>{if(u.fixed){var t=l(r(e.zIndex),{width:u.width+"px",height:u.height+"px",[e.position]:d.value+"px"});return u.transform&&(t.transform="translate3d(0, "+u.transform+"px, 0)"),t}})),p=()=>{if(o.value&&!oe(o)){var{container:a,position:i}=e,l=g(o),r=ue(window);if(u.width=l.width,u.height=l.height,"top"===i)if(a){var n=g(a),s=n.bottom-d.value-u.height;u.fixed=d.value>l.top&&n.bottom>0,u.transform=s<0?s:0}else u.fixed=d.value>l.top;else{var{clientHeight:v}=document.documentElement;if(a){var c=g(a),p=v-c.top-d.value-u.height;u.fixed=v-d.value<l.bottom&&v>c.top,u.transform=p<0?-p:0}else u.fixed=v-d.value<l.bottom}(e=>{t("scroll",{scrollTop:e,isFixed:u.fixed})})(r)}};return k((()=>u.fixed),(e=>t("change",e))),Y("scroll",p,{target:s}),function(e,t){if(a&&window.IntersectionObserver){var i=new IntersectionObserver((e=>{t(e[0].intersectionRatio>0)}),{root:document.body}),l=()=>{e.value&&i.unobserve(e.value)};x(l),S(l),V((()=>{e.value&&i.observe(e.value)}))}}(o,p),()=>N("div",{ref:o,style:v.value},[N("div",{class:he({fixed:u.fixed}),style:c.value},[null==n.default?void 0:n.default()])])}})),[me,be]=n("tab"),we=C({name:me,props:{dot:Boolean,type:String,color:String,title:String,badge:[Number,String],isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String},setup(e){var t=T((()=>{var t={},{type:a,color:i,disabled:l,isActive:r,activeColor:n,inactiveColor:o}=e;i&&"card"===a&&(t.borderColor=i,l||(r?t.backgroundColor=i:t.color=i));var s=r?n:o;return s&&(t.color=s),t}));return()=>{return N("div",{role:"tab",class:[be({active:e.isActive,disabled:e.disabled})],style:t.value,"aria-selected":e.isActive},[(a=N("span",{class:be("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]),e.dot||s(e.badge)&&""!==e.badge?N(u,{dot:e.dot,content:e.badge},{default:()=>[a]}):a)]);var a}}}),[ye,xe]=n("swipe"),Se=Symbol(ye),Ce=o(C({name:ye,props:{loop:d,width:[Number,String],height:[Number,String],vertical:Boolean,touchable:d,lazyRender:Boolean,indicatorColor:String,showIndicators:d,stopPropagation:d,autoplay:{type:[Number,String],default:0},duration:{type:[Number,String],default:500},initialSwipe:{type:[Number,String],default:0}},emits:["change"],setup(e,{emit:t,slots:a}){var i,l,r,n,o=w(),s=I({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),u=K(),d=ce(),{children:v,linkChildren:c}=te(Se),p=T((()=>v.length)),f=T((()=>s[e.vertical?"height":"width"])),h=T((()=>e.vertical?u.deltaY.value:u.deltaX.value)),g=T((()=>s.rect?(e.vertical?s.rect.height:s.rect.width)-f.value*p.value:0)),m=T((()=>Math.ceil(Math.abs(g.value)/f.value))),b=T((()=>p.value*f.value)),y=T((()=>(s.active+p.value)%p.value)),C=T((()=>{var t=e.vertical?"vertical":"horizontal";return u.direction.value===t})),R=T((()=>{var t={transitionDuration:(s.swiping?0:e.duration)+"ms",transform:"translate"+(e.vertical?"Y":"X")+"("+s.offset+"px)"};if(f.value){var a=e.vertical?"height":"width",i=e.vertical?"width":"height";t[a]=b.value+"px",t[i]=e[i]?e[i]+"px":""}return t})),z=(t,a=0)=>{var i=t*f.value;e.loop||(i=Math.min(i,-g.value));var l=a-i;return e.loop||(l=ne(l,g.value,0)),l},_=({pace:a=0,offset:i=0,emitChange:l})=>{if(!(p.value<=1)){var{active:r}=s,n=(t=>{var{active:a}=s;return t?e.loop?ne(a+t,-1,p.value):ne(a+t,0,m.value):a})(a),o=z(n,i);if(e.loop){if(v[0]&&o!==g.value){var u=o<g.value;v[0].setOffset(u?b.value:0)}if(v[p.value-1]&&0!==o){var d=o>0;v[p.value-1].setOffset(d?-b.value:0)}}s.active=n,s.offset=o,l&&n!==r&&t("change",y.value)}},M=()=>{s.swiping=!0,s.active<=-1?_({pace:p.value}):s.active>=p.value&&_({pace:-p.value})},j=()=>{M(),u.reset(),Z((()=>{s.swiping=!1,_({pace:1,emitChange:!0})}))},O=()=>clearTimeout(i),A=()=>{O(),e.autoplay>0&&p.value>1&&(i=setTimeout((()=>{j(),A()}),+e.autoplay))},E=(t=+e.initialSwipe)=>{if(o.value){if(!oe(o)){var a,i,l={width:o.value.offsetWidth,height:o.value.offsetHeight};s.rect=l,s.width=+(null!=(a=e.width)?a:l.width),s.height=+(null!=(i=e.height)?i:l.height)}p.value&&(t=Math.min(p.value-1,t)),s.active=t,s.swiping=!0,s.offset=z(t),v.forEach((e=>{e.setOffset(0)}))}},D=()=>E(s.active),H=t=>{e.touchable&&(u.start(t),l=Date.now(),O(),M())},W=t=>{e.touchable&&s.swiping&&(u.move(t),C.value&&(ee(t,e.stopPropagation),_({offset:h.value})))},P=()=>{if(e.touchable&&s.swiping){var t=Date.now()-l,a=h.value/t;if((Math.abs(a)>.25||Math.abs(h.value)>f.value/2)&&C.value){var i=e.vertical?u.offsetY.value:u.offsetX.value,r=0;r=e.loop?i>0?h.value>0?-1:1:0:-Math[h.value>0?"ceil":"floor"](h.value/f.value),_({pace:r,emitChange:!0})}else h.value&&_({pace:0});s.swiping=!1,A()}},U=(t,a)=>{var i=a===y.value,l=i?{backgroundColor:e.indicatorColor}:void 0;return N("i",{style:l,class:xe("indicator",{active:i})},null)};return G({prev:()=>{M(),u.reset(),Z((()=>{s.swiping=!1,_({pace:-1,emitChange:!0})}))},next:j,state:s,resize:D,swipeTo:(t,a={})=>{M(),u.reset(),Z((()=>{var i;i=e.loop&&t===p.value?0===s.active?0:t:t%p.value,a.immediate?Z((()=>{s.swiping=!1})):s.swiping=!1,_({pace:i-s.active,emitChange:!0})}))}}),c({size:f,props:e,count:p,activeIndicator:y}),k((()=>e.initialSwipe),(e=>E(+e))),k(p,(()=>E(s.active))),k([p,()=>e.autoplay],A),k([d.width,d.height],D),k((r=w("visible"),(n=()=>{q&&(r.value=document.hidden?"hidden":"visible")})(),Y("visibilitychange",n),r),(e=>{"visible"===e?A():O()})),L(E),B((()=>E(s.active))),Q((()=>E(s.active))),x(O),S(O),()=>N("div",{ref:o,class:xe()},[N("div",{style:R.value,class:xe("track",{vertical:e.vertical}),onTouchstart:H,onTouchmove:W,onTouchend:P,onTouchcancel:P},[null==a.default?void 0:a.default()]),a.indicator?a.indicator({active:y.value}):e.showIndicators&&p.value>1?N("div",{class:xe("indicators",{vertical:e.vertical})},[Array(p.value).fill("").map(U)]):void 0])}})),[Ie,Te]=n("tabs"),ke=C({name:Ie,props:{inited:Boolean,animated:Boolean,swipeable:Boolean,lazyRender:Boolean,count:{type:Number,required:!0},duration:{type:[Number,String],required:!0},currentIndex:{type:Number,required:!0}},emits:["change"],setup(e,{emit:t,slots:a}){var i=w(),l=e=>t("change",e),r=t=>{var a=i.value;a&&a.state.active!==t&&a.swipeTo(t,{immediate:!e.inited})};return k((()=>e.currentIndex),r),L((()=>{r(e.currentIndex)})),()=>{return N("div",{class:Te("content",{animated:e.animated||e.swipeable})},[(t=null==a.default?void 0:a.default(),e.animated||e.swipeable?N(Ce,{ref:i,loop:!1,class:Te("track"),duration:1e3*+e.duration,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:l},{default:()=>[t]}):t)]);var t}}}),[Ne,Le]=n("tabs"),Be=Symbol(Ne),Re=C({name:Ne,props:{color:String,border:Boolean,sticky:Boolean,animated:Boolean,ellipsis:d,swipeable:Boolean,scrollspy:Boolean,background:String,lazyRender:d,lineWidth:[Number,String],lineHeight:[Number,String],beforeChange:Function,titleActiveColor:String,titleInactiveColor:String,type:{type:String,default:"line"},active:{type:[Number,String],default:0},duration:{type:[Number,String],default:.3},offsetTop:{type:[Number,String],default:0},swipeThreshold:{type:[Number,String],default:5}},emits:["click","change","scroll","disabled","rendered","update:active"],setup(e,{emit:t,slots:a}){var l,r,n,o,u=w(),d=w(),p=w(),f=ce(),h=J(u),[g,m]=(o=w([]),y((()=>{o.value=[]})),[o,e=>t=>{o.value[e]=t}]),{children:b,linkChildren:x}=te(Be),S=I({inited:!1,position:"",lineStyle:{},currentIndex:-1}),C=T((()=>b.length>e.swipeThreshold||!e.ellipsis)),L=T((()=>({borderColor:e.color,background:e.background}))),z=(e,t)=>{var a;return null!=(a=e.name)?a:t},_=T((()=>{var e=b[S.currentIndex];if(e)return z(e,S.currentIndex)})),M=T((()=>i(e.offsetTop))),j=T((()=>e.sticky?M.value+l:0)),O=t=>{var a=d.value,i=g.value;if(C.value&&a&&i&&i[S.currentIndex]){var l=i[S.currentIndex].$el;!function(e,t,a){F(pe);var i=0,l=e.scrollLeft,r=0===a?1:Math.round(1e3*a/16);!function a(){e.scrollLeft+=(t-l)/r,++i<r&&(pe=$(a))}()}(a,l.offsetLeft-(a.offsetWidth-l.offsetWidth)/2,t?0:+e.duration)}},A=()=>{var t=S.inited;R((()=>{var a=g.value;if(a&&a[S.currentIndex]&&"line"===e.type&&!oe(u.value)){var i=a[S.currentIndex].$el,{lineWidth:l,lineHeight:r}=e,n=i.offsetLeft+i.offsetWidth/2,o={width:c(l),backgroundColor:e.color,transform:"translateX("+n+"px) translateX(-50%)"};if(t&&(o.transitionDuration=e.duration+"s"),s(r)){var d=c(r);o.height=d,o.borderRadius=d}S.lineStyle=o}}))},E=a=>{var i=(e=>{for(var t=e<S.currentIndex?-1:1;e>=0&&e<b.length;){if(!b[e].disabled)return e;e+=t}})(a);if(s(i)){var l=b[i],r=z(l,i),n=null!==S.currentIndex;S.currentIndex=i,r!==e.active&&(t("update:active",r),n&&t("change",r,l.title))}},D=e=>{var t=b.find(((t,a)=>z(t,a)===e)),a=t?b.indexOf(t):0;E(a)},H=(t=!1)=>{if(e.scrollspy){var a=b[S.currentIndex].$el;if(a&&h.value){var i=ve(a,h.value)-j.value;r=!0,function(e,t,a,i){var l=ue(e),r=l<t,n=0===a?1:Math.round(1e3*a/16),o=(t-l)/n;!function a(){l+=o,(r&&l>t||!r&&l<t)&&(l=t),de(e,l),r&&l<t||!r&&l>t?$(a):i&&$(i)}()}(h.value,i,t?0:+e.duration,(()=>{r=!1}))}}},W=e=>{n=e.isFixed,t("scroll",e)},P=()=>b.map(((a,i)=>N(we,{ref:m(i),dot:a.dot,type:e.type,badge:a.badge,title:a.title,color:e.color,style:a.titleStyle,class:a.titleClass,isActive:i===S.currentIndex,disabled:a.disabled,scrollable:C.value,renderTitle:a.$slots.title,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:()=>{((a,i)=>{var{title:l,disabled:r}=b[i],n=z(b[i],i);r?t("disabled",n,l):(ae({interceptor:e.beforeChange,args:[n],done:()=>{E(i),H()}}),t("click",n,l),le(a))})(a,i)}},null))),U=()=>{var t,i,{type:l,border:r}=e;return N("div",{ref:p,class:[Le("wrap",{scrollable:C.value}),{[v]:"line"===l&&r}]},[N("div",{ref:d,role:"tablist",class:Le("nav",[l,{complete:C.value}]),style:L.value},[null==(t=a["nav-left"])?void 0:t.call(a),P(),"line"===l&&N("div",{class:Le("line"),style:S.lineStyle},null),null==(i=a["nav-right"])?void 0:i.call(a)])])};k([()=>e.color,f.width],A),k((()=>e.active),(e=>{e!==_.value&&D(e)})),k((()=>b.length),(()=>{S.inited&&(D(e.active),A(),R((()=>{O(!0)})))})),k((()=>S.currentIndex),(()=>{var t;O(),A(),n&&!e.scrollspy&&(t=Math.ceil(ve(u.value)-M.value),de(window,t),de(document.body,t))}));return G({resize:A,scrollTo:e=>{R((()=>{D(e),H(!0)}))}}),B(A),Q(A),V((()=>{D(e.active),R((()=>{var e;S.inited=!0,e=p.value,l=se(e)?e.innerHeight:e.getBoundingClientRect().height,O(!0)}))})),Y("scroll",(()=>{if(e.scrollspy&&!r){var t=(()=>{for(var e=0;e<b.length;e++)if((se(t=b[e].$el)?0:t.getBoundingClientRect().top)>j.value)return 0===e?0:e-1;var t;return b.length-1})();E(t)}}),{target:h}),x({props:e,setLine:A,onRendered:(e,a)=>t("rendered",e,a),currentName:_,scrollIntoView:O}),()=>{var t,i;return N("div",{ref:u,class:Le([e.type])},[e.sticky?N(ge,{container:u.value,offsetTop:M.value,onScroll:W},{default:()=>[U(),null==(t=a["nav-bottom"])?void 0:t.call(a)]}):[U(),null==(i=a["nav-bottom"])?void 0:i.call(a)],N(ke,{count:b.length,inited:S.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:S.currentIndex,onChange:E},{default:()=>[null==a.default?void 0:a.default()]})])}}}),ze=Symbol();function _e(){return z(ze,null)}var[Me,je]=n("swipe-item"),Oe=o(C({name:Me,setup(e,{slots:t}){var a,i=I({offset:0,inited:!1,mounted:!1}),{parent:l,index:r}=ie(Se);if(l){var n=T((()=>{var e={},{vertical:t}=l.props;return l.size.value&&(e[t?"height":"width"]=l.size.value+"px"),i.offset&&(e.transform="translate"+(t?"Y":"X")+"("+i.offset+"px)"),e})),o=T((()=>{var{loop:e,lazyRender:t}=l.props;if(!t||a)return!0;if(!i.mounted)return!1;var n=l.activeIndicator.value,o=l.count.value-1,s=0===n&&e?o:n-1,u=n===o&&e?0:n+1;return a=r.value===n||r.value===s||r.value===u}));return L((()=>{R((()=>{i.mounted=!0}))})),G({setOffset:e=>{i.offset=e}}),()=>N("div",{class:je(),style:n.value},[o.value?null==t.default?void 0:t.default():null])}}})),[Ae,Ee]=n("tab"),De=o(C({name:Ae,props:l({},re,{dot:Boolean,name:[Number,String],badge:[Number,String],title:String,disabled:Boolean,titleClass:p,titleStyle:[String,Object]}),setup(e,{slots:t}){var a=w(!1),{parent:i,index:l}=ie(Be);if(i){var r=()=>{var t;return null!=(t=e.name)?t:l.value},n=T((()=>{var t=r()===i.currentName.value;return t&&!a.value&&(a.value=!0,i.props.lazyRender&&R((()=>{i.onRendered(r(),e.title)}))),t}));return k((()=>e.title),(()=>{i.setLine(),i.scrollIntoView()})),_(ze,n),()=>{var{animated:e,swipeable:l,scrollspy:r,lazyRender:o}=i.props;if(t.default||e){var s=r||n.value;if(e||l)return N(Oe,{role:"tabpanel","aria-hidden":!n.value,class:Ee("pane-wrapper",{inactive:!n.value})},{default:()=>[N("div",{class:Ee("pane")},[null==t.default?void 0:t.default()])]});var u=a.value||r||!o?null==t.default?void 0:t.default():null;return M(N("div",{role:"tabpanel",class:Ee("pane")},[u]),[[j,s]])}}}}})),He=o(Re);const We={name:"List",components:{[He.name]:He,[De.name]:De,[f.name]:f,[h.name]:h,[m.name]:m,"wei-page-list":O((()=>e((()=>import("./PageList.96db7174.js")),["./assets/PageList.96db7174.js","./assets/PageList.bf6e5e92.css","./assets/index.ab83b5f8.js","./assets/index.45ebac95.css","./assets/vendor.64c8d20c.js","./assets/vant.1c522a55.js","./assets/vant.89b74917.css","./assets/on-popup-reopen.ca56adb1.js","./assets/interceptor.223c8325.js","./assets/use-route.6524b53e.js","./assets/function.90d190e6.js","./assets/function.7b5209cd.css","./assets/index.52cdef72.js","./assets/index.7198911f.css","./assets/index.c2c83194.js","./assets/index.25cb5b2d.css","./assets/index.8b50abf8.js","./assets/index.ab704dad.css","./assets/index.4ab86201.js","./assets/index.b29ec5b2.css"]))),"wei-back-top":O((()=>e((()=>import("./Index.73592f09.js")),["./assets/Index.73592f09.js","./assets/Index.03740282.css","./assets/index.ab83b5f8.js","./assets/index.45ebac95.css","./assets/vendor.64c8d20c.js"])))},setup(){let e=I({active:"",list:[{title:"开发环境",name:"dev"},{title:"测试环境",name:"test"},{title:"生产环境",name:"prod"}],change:e=>{a.data.name=e,null!=t&&null!=t.resetDataRequest&&t.resetDataRequest()}}),t=null;const a=I({ref:e=>{t=e},url:"/test/getPageList",data:{name:e.list[0].name},list:[],change:e=>{a.list=e}}),i=A();return{tab:e,pageList:a,navLeftClick:()=>{i.go(-1)}}}};We.render=function(e,t,a,i,l,r){const n=E("van-nav-bar"),o=E("van-tab"),s=E("van-tabs"),u=E("van-empty"),d=E("van-cell"),v=E("wei-page-list"),c=E("wei-back-top");return D(),H(P,null,[N(n,{title:"分页列表(内置上拉、下拉)","left-text":"返回","left-arrow":"",onClickLeft:i.navLeftClick},null,8,["onClickLeft"]),N(s,{active:i.tab.active,"onUpdate:active":t[1]||(t[1]=e=>i.tab.active=e),onChange:i.tab.change},{default:W((()=>[(D(!0),H(P,null,U(i.tab.list,(e=>(D(),H(o,{key:i.tab.name,title:e.title,name:e.name},null,8,["title","name"])))),128))])),_:1},8,["active","onChange"]),N(v,{onMyRef:i.pageList.ref,url:i.pageList.url,data:i.pageList.data,onChange:i.pageList.change},{default:W((()=>[X("一定要设置无数据的时候,占位用的dom,否则可能出错"),null==i.pageList.list||0>=i.pageList.list.length?(D(),H(u,{key:0,image:"search",description:"无数据"})):(D(!0),H(P,{key:1},U(i.pageList.list,(e=>(D(),H(d,{key:e.id,title:e.methodName,"onUpdate:title":t=>e.methodName=t,value:e.id,"onUpdate:value":t=>e.id=t,label:e.content,"onUpdate:label":t=>e.content=t},null,8,["title","onUpdate:title","value","onUpdate:value","label","onUpdate:label"])))),128))])),_:1},8,["onMyRef","url","data","onChange"]),N(c)],64)};var Pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:We});export{Pe as L,ue as g,oe as i,_e as u};
//# sourceMappingURL=List.6d054adf.js.map
