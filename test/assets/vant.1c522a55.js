import{t as e,c as o,w as t,e as n,a as l,f as a,h as r,I as s,u as i,g as c,i as u,n as d,p,j as m,k as f,l as g,b as v,d as y}from"./index.ab83b5f8.js";import{j as h,g as b,v as S,x as B,y as C,w as k,i as w,T as x,z as O,A as T,k as z,B as P,C as I,D as N,F as A,q as j,d as H,f as D,n as L}from"./vendor.64c8d20c.js";import{u as E,a as q,o as F,s as M,g as R,p as U,b as $,P as V}from"./on-popup-reopen.ca56adb1.js";import{u as Y,a as G,c as J}from"./interceptor.223c8325.js";import{r as K,u as Q}from"./use-route.6524b53e.js";var[W,X]=o("action-bar"),Z=Symbol(W),_=h({name:W,props:{safeAreaInsetBottom:e},setup(e,{slots:o}){var{linkChildren:t}=Y(Z);return t(),()=>b("div",{class:X({unfit:!e.safeAreaInsetBottom})},[null==o.default?void 0:o.default()])}}),ee=t(_),[oe,te]=o("loading"),ne=Array(12).fill(b("i",null,null)),le=b("svg",{class:te("circular"),viewBox:"25 25 50 50"},[b("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),ae=h({name:oe,props:{size:[Number,String],color:String,vertical:Boolean,textSize:[Number,String],textColor:String,type:{type:String,default:"circular"}},setup(e,{slots:o}){var t=S((()=>n({color:e.color},l(e.size)))),r=()=>{var t;if(o.default)return b("span",{class:te("text"),style:{fontSize:a(e.textSize),color:null!=(t=e.textColor)?t:e.color}},[o.default()])};return()=>{var{type:o,vertical:n}=e;return b("div",{class:te([o,{vertical:n}])},[b("span",{class:te("spinner",o),style:t.value},["spinner"===o?ne:le]),r()])}}}),re=t(ae),[se,ie]=o("button"),ce=h({name:se,props:n({},K,{text:String,icon:String,color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,loadingSize:String,loadingText:String,loadingType:String,tag:{type:String,default:"button"},type:{type:String,default:"default"},size:{type:String,default:"normal"},nativeType:{type:String,default:"button"},iconPosition:{type:String,default:"left"}}),emits:["click"],setup(e,{emit:o,slots:t}){var n=Q(),l=()=>e.loading?t.loading?t.loading():b(re,{size:e.loadingSize,type:e.loadingType,class:ie("loading")},null):t.icon?b("div",{class:ie("icon")},[t.icon()]):e.icon?b(s,{name:e.icon,class:ie("icon"),classPrefix:e.iconPrefix},null):void 0,a=()=>{var o;if(o=e.loading?e.loadingText:t.default?t.default():e.text)return b("span",{class:ie("text")},[o])},i=()=>{var{color:o,plain:t}=e;if(o){var n={color:t?o:"white"};return t||(n.background=o),o.includes("gradient")?n.border=0:n.borderColor=o,n}},c=t=>{e.loading?t.preventDefault():e.disabled||(o("click",t),n())};return()=>{var{tag:o,type:t,size:n,block:s,round:u,plain:d,square:p,loading:m,disabled:f,hairline:g,nativeType:v,iconPosition:y}=e,h=[ie([t,n,{plain:d,block:s,round:u,square:p,loading:m,disabled:f,hairline:g}]),{[r]:g}];return b(o,{type:v,class:h,style:i(),disabled:f,onClick:c},{default:()=>[b("div",{class:ie("content")},["left"===y&&l(),a(),"right"===y&&l()])]})}}}),ue=t(ce),[de,pe]=o("action-bar-button"),me=h({name:de,props:n({},K,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),setup(e,{slots:o}){var t=Q(),{parent:n,index:l}=G(Z),a=S((()=>{if(n){var e=n.children[l.value-1];return!(e&&"isButton"in e)}})),r=S((()=>{if(n){var e=n.children[l.value+1];return!(e&&"isButton"in e)}}));return E({isButton:!0}),()=>{var{type:n,icon:l,text:s,color:i,loading:c,disabled:u}=e;return b(ue,{class:pe([n,{last:r.value,first:a.value}]),size:"large",type:n,icon:l,color:i,loading:c,disabled:u,onClick:t},{default:()=>[o.default?o.default():s]})}}}),fe=t(me),ge={show:Boolean,zIndex:[Number,String],overlay:e,duration:[Number,String],teleport:[String,Object],lockScroll:e,lazyRender:e,overlayStyle:Object,overlayClass:i,transitionAppear:Boolean,closeOnClickOverlay:e},ve=Object.keys(ge),ye=0;function he(e){var o=w(!1);return k(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}var[be,Se]=o("overlay"),Be=h({name:be,props:{show:Boolean,zIndex:[Number,String],duration:[Number,String],className:i,lockScroll:e,customStyle:Object},setup(e,{slots:o}){var t=he((()=>e.show)),l=e=>{U(e,!0)},a=t((()=>{var t=n(c(e.zIndex),e.customStyle);return u(e.duration)&&(t.animationDuration=e.duration+"s"),O(b("div",{style:t,class:[Se(),e.className],onTouchmove:e.lockScroll?l:d},[null==o.default?void 0:o.default()]),[[T,e.show]])}));return()=>b(x,{name:"van-fade"},{default:()=>[a()]})}}),Ce=t(Be),[ke,we]=o("popup"),xe=2e3,Oe=h({name:ke,inheritAttrs:!1,props:n({},ge,{round:Boolean,closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,safeAreaInsetBottom:Boolean,position:{type:String,default:"center"},closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"}}),emits:["open","close","click","opened","closed","update:show","click-overlay","click-close-icon"],setup(e,{emit:o,attrs:t,slots:n}){var l,a,r,i,c,d,p,m,f,g=w(),v=w(),y=he((()=>e.show||!e.lazyRender)),h=S((()=>{var o={zIndex:g.value};u(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=e.duration+"s");return o})),H=()=>{l||(void 0!==e.zIndex&&(xe=+e.zIndex),l=!0,g.value=++xe)},D=()=>{l&&(l=!1,o("update:show",!1))},L=t=>{o("click-overlay",t),e.closeOnClickOverlay&&D()},Y=()=>{if(e.overlay)return b(Ce,{show:e.show,class:e.overlayClass,zIndex:g.value,duration:e.duration,customStyle:e.overlayStyle,onClick:L},{default:n["overlay-content"]})},G=e=>{o("click-close-icon",e),D()},J=()=>{if(e.closeable)return b(s,{role:"button",tabindex:0,name:e.closeIcon,class:we("close-icon",e.closeIconPosition),classPrefix:e.iconPrefix,onClick:G},null)},K=e=>o("click",e),Q=()=>o("opened"),W=()=>o("closed"),X=y((()=>{var{round:o,position:l,safeAreaInsetBottom:a}=e;return O(b("div",j({ref:v,style:h.value,class:we({round:o,[l]:l,"safe-area-inset-bottom":a}),onClick:K},t),[null==n.default?void 0:n.default(),J()]),[[T,e.show]])})),Z=()=>{var{position:o,transition:t,transitionAppear:n}=e;return b(x,{name:t||("center"===o?"van-fade":"van-popup-slide-"+o),appear:n,onAfterEnter:Q,onAfterLeave:W},{default:()=>[X()]})};return k((()=>e.show),(e=>{e?(H(),o("open")):(D(),o("close"))})),E({popupRef:v}),r=v,i=()=>e.show&&e.lockScroll,c=q(),d=e=>{c.move(e);var o=c.deltaY.value>0?"10":"01",t=R(e.target,r.value),{scrollHeight:n,offsetHeight:l,scrollTop:a}=t,s="11";0===a?s=l>=n?"00":"01":a+l>=n&&(s="10"),"11"===s||!c.isVertical()||parseInt(s,2)&parseInt(o,2)||U(e,!0)},p=()=>{document.addEventListener("touchstart",c.start),document.addEventListener("touchmove",d,!!M&&{passive:!1}),ye||document.body.classList.add("van-overflow-hidden"),ye++},m=()=>{ye&&(document.removeEventListener("touchstart",c.start),document.removeEventListener("touchmove",d),--ye||document.body.classList.remove("van-overflow-hidden"))},f=()=>{i()&&m()},F((()=>{i()&&p()})),B(f),C(f),k(i,(e=>{e?p():m()})),$("popstate",(()=>{e.closeOnPopstate&&(D(),a=!1)})),z((()=>{e.show&&H()})),P((()=>{a&&(o("update:show",!0),a=!1)})),B((()=>{e.show&&(D(),a=!0)})),I(V,(()=>e.show)),()=>e.teleport?b(N,{to:e.teleport},{default:()=>[Y(),Z()]}):b(A,null,[Y(),Z()])}}),Te=t(Oe);function ze(){var e=D({show:!1}),o=o=>{e.show=o},t=t=>{n(e,t),L((()=>o(!0)))},l=()=>o(!1);return E({open:t,close:l,toggle:o}),{open:t,close:l,state:e,toggle:o}}function Pe(e){var o=H(e),t=document.createElement("div");return document.body.appendChild(t),{instance:o.mount(t),unmount(){o.unmount(),document.body.removeChild(t)}}}var Ie,[Ne,Ae,je]=o("dialog"),He=[...ve,"transition","closeOnPopstate"],De=h({name:Ne,props:n({},ge,{title:String,theme:String,width:[Number,String],message:[String,Function],callback:Function,allowHtml:Boolean,className:i,beforeClose:Function,messageAlign:String,closeOnPopstate:e,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showConfirmButton:e,closeOnClickOverlay:Boolean,transition:{type:String,default:"van-dialog-bounce"}}),emits:["confirm","cancel","update:show"],setup(e,{emit:o,slots:t}){var n=D({confirm:!1,cancel:!1}),l=e=>o("update:show",e),r=o=>{l(!1),e.callback&&e.callback(o)},s=t=>()=>{e.show&&(o(t),e.beforeClose?(n[t]=!0,J({interceptor:e.beforeClose,args:[t],done(){r(t),n[t]=!1},canceled(){n[t]=!1}})):r(t))},i=s("cancel"),c=s("confirm"),u=()=>{var o=t.title?t.title():e.title;if(o)return b("div",{class:Ae("header",{isolated:!e.message&&!t.default})},[o])},d=o=>{var{message:t,allowHtml:n,messageAlign:l}=e,a=Ae("message",{"has-title":o,[l]:l}),r=g(t)?t():t;return n&&"string"==typeof r?b("div",{class:a,innerHTML:r},null):b("div",{class:a},[r])},v=()=>{if(t.default)return b("div",{class:Ae("content")},[t.default()]);var{title:o,message:n,allowHtml:l}=e;if(n){var a=!(!o&&!t.title);return b("div",{key:l?1:0,class:Ae("content",{isolated:!a})},[d(a)])}},y=()=>t.footer?t.footer():"round-button"===e.theme?b(ee,{class:Ae("footer")},{default:()=>[e.showCancelButton&&b(fe,{type:"warning",text:e.cancelButtonText||je("cancel"),class:Ae("cancel"),color:e.cancelButtonColor,loading:n.cancel,onClick:i},null),e.showConfirmButton&&b(fe,{type:"danger",text:e.confirmButtonText||je("confirm"),class:Ae("confirm"),color:e.confirmButtonColor,loading:n.confirm,onClick:c},null)]}):b("div",{class:[f,Ae("footer")]},[e.showCancelButton&&b(ue,{size:"large",text:e.cancelButtonText||je("cancel"),class:Ae("cancel"),style:{color:e.cancelButtonColor},loading:n.cancel,onClick:i},null),e.showConfirmButton&&b(ue,{size:"large",text:e.confirmButtonText||je("confirm"),class:[Ae("confirm"),{[m]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:n.confirm,onClick:c},null)]);return()=>{var{width:o,title:t,theme:n,message:r,className:s}=e;return b(Te,j({role:"dialog",class:[Ae([n]),s],style:{width:a(o)},"aria-labelledby":t||r},p(e,He),{"onUpdate:show":l}),{default:()=>[u(),v(),y()]})}}});function Le(e){return v?new Promise(((o,t)=>{var l;Ie||(l={setup(){var{state:e,toggle:o}=ze();return()=>b(De,j(e,{"onUpdate:show":o}),null)}},({instance:Ie}=Pe(l))),Ie.open(n({},Le.currentOptions,e,{callback:e=>{("confirm"===e?o:t)(e)}}))})):Promise.resolve()}Le.defaultOptions={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1},Le.currentOptions=n({},Le.defaultOptions),Le.alert=Le,Le.confirm=e=>Le(n({showCancelButton:!0},e)),Le.close=()=>{Ie&&Ie.toggle(!1)},Le.setDefaultOptions=e=>{n(Le.currentOptions,e)},Le.resetDefaultOptions=()=>{Le.currentOptions=n({},Le.defaultOptions)},Le.install=e=>{e.use(t(De)),e.config.globalProperties.$dialog=Le},Le.Component=t(De);var Ee,qe,[Fe,Me]=o("notify"),Re=h({name:Fe,props:n({},ge,{color:String,message:[Number,String],className:i,background:String,lockScroll:Boolean,type:{type:String,default:"danger"}}),setup:(e,{slots:o})=>()=>{var t={color:e.color,background:e.background};return b(Te,{show:e.show,class:[Me([e.type]),e.className],style:t,overlay:!1,position:"top",duration:.2,lockScroll:e.lockScroll},{default:()=>[o.default?o.default():e.message]})}});function Ue(e){var o;if(v)return qe||({instance:qe}=Pe({setup(){var{state:e,toggle:o}=ze();return()=>b(Re,j(e,{"onUpdate:show":o}),null)}})),e=n(Ue.currentOptions,y(o=e)?o:{message:o}),qe.open(e),clearTimeout(Ee),e.duration>0&&(Ee=window.setTimeout(Ue.clear,e.duration)),qe}Ue.clear=()=>{qe&&qe.toggle(!1)},Ue.currentOptions={type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,className:"",lockScroll:!1,background:void 0},Ue.setDefaultOptions=e=>{n(Ue.currentOptions,e)},Ue.resetDefaultOptions=()=>{Ue.currentOptions={type:"danger",color:void 0,message:"",onClose:void 0,onClick:void 0,onOpened:void 0,duration:3e3,className:"",lockScroll:!1,background:void 0}},Ue.install=e=>{e.use(t(Re)),e.config.globalProperties.$notify=Ue},Ue.Component=t(Re);var $e={errorMsg:function(e="失败",o=3e3){Ue({type:"danger",message:e,duration:o})},successMsg:function(e="成功",o=3e3){Ue({type:"success",message:e,duration:o})},alert:function({title:e="提示",message:o="",theme:t="round",confirmButtonText:n="确认",confirmButtonColor:l="#ee0a24",overlay:a=!0,closeOnClickOverlay:r=!1,lockScroll:s=!0,allowHtml:i=!1,confirm:c=function(){}}={}){Le.alert({title:e,message:o,theme:t,confirmButtonText:n,confirmButtonColor:l,overlay:a,closeOnClickOverlay:r,lockScroll:s,allowHtml:i}).then((()=>{c()}))},confirm:function({title:e="提示",message:o="",theme:t="round",confirmButtonText:n="确认",confirmButtonColor:l="#ee0a24",cancelButtonText:a="取消",cancelButtonColor:r="black",overlay:s=!0,closeOnClickOverlay:i=!1,lockScroll:c=!0,allowHtml:u=!1,confirm:d=function(){},cancel:p=function(){}}={}){Le.confirm({title:e,message:o,theme:t,showCancelButton:!0,confirmButtonText:n,confirmButtonColor:l,cancelButtonText:a,cancelButtonColor:r,overlay:s,closeOnClickOverlay:i,lockScroll:c,allowHtml:u}).then((()=>{try{d()}catch(e){console.error(e)}})).catch((()=>{p()}))}};export{$e as $,ue as B,re as L,Te as P,ve as a,Pe as m,ge as p,ze as u};
//# sourceMappingURL=vant.1c522a55.js.map
